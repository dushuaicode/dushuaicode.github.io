---
layout:     post
title:      "Fifth Day"
author:     "dushuai"
tags:
    - experience
---

> 分支结构

<!--more-->

---

## 1. 签到&暖场

开场7点时，跟大家打招呼以及提醒大家开始签到。根据签到情况，若3~4分钟内还有学生没有签到，便告知大家不再等待，仍未签到的同学错过教学的同学可以仔细察看群里的教学记录，有疑问可以课后或者答疑时询问。

同时可以在这段时间内询问一下同学对该次教学的期望，建议和意见。同时可以讲讲基于比较的排序算法。

## 2. 本章知识点总结

> 概述：使用if语句，使用条件表达式在程序中作出决定，使用if-else语句在两个可选流程之间进行选择，使用if elif else 在多个流程之间进行选择；能够计算在Python中布尔表达式的值的结果，并使用条件和布尔表达式来控制程序流。

### 2.1 新的数据类型--布尔类型

以真或假为值的表达式称为布尔表达式，它在程序设计中的作用是描述某种条件，以支持“如果某条件满足，则执行某语句”之类的处理过程。我们将学习的条件和循环语句中都会用到布尔表达式。Python 语言定义了布尔类型 bool，bool 类型的两个值为 True 和 False。当然，像其他大部分编程语言一样，Python 也可以分别用 1 和 0 来表示真、假。

```
#类型转换的例子
>>> bool(1)
True
>>> bool(0)
False
>>> bool("helloworld")
True
>>> bool("")
False
>>> 
```

### 2.2 关系运算

简单的布尔表达式是判断两个表达式的值的大小关系的，一般形式是： ```<表达式> <关系运算符> <表达式>``` 

其中两个表达式可以是数值类型或字符串类型的表达式，而关系运算符包括<、<=、>、>=、 ==、!=（或<>）六种，分别表示小于、小于等于、大于、大于等于、等于和不等于。这些运算符中尤其要注意“等于”运算符，初学者常犯的一个错误是用“=”来表达相等关系， 事实上在 Python 中，“=”是赋值符号，两个等号连写才是“相等”的意思。 

### 2.3 逻辑运算

仅用简单布尔表达式是不够的，复杂条件需要用复杂布尔表达式来描述。将多个简单布尔表达式用逻辑运算符联结起来，即可构成复杂布尔表达式。Python 语言支持的逻辑运算 符有三个：```and```、```or``` 和 ```not```。

#### 2.3.1 and

x      | y    | x and y
------ | ---- | ----------
True    | True  | True
True    | False   | False
False     | True  | False
False     | False   | False

逻辑运算符 and 联结两个布尔表达式，并得到一个新的布尔表达式。形如： <布尔表达式 1> and <布尔表达式 2> 新表达式的值依赖于参加 and 运算的两个布尔表达式的值。假设P 和 Q 表示参加运算的布尔表达式，P and Q 是新的布尔表达式，P and Q 为真当且仅当 P 为真并且 Q 为真，这也正是 and（并且）的含义。
 
#### 2.3.2 or

x      | y    | x or y
------ | ---- | ----------
True    | True  | True
True    | False   | True
False     | True  | True
False     | False   | False

逻辑运算符 or 联结两个布尔表达式，并得到一个新的布尔表达式。形如： <布尔表达式 1> or <布尔表达式 2> 新表达式的值依赖于参加 or 运算的两个布尔表达式的值。P or Q 为假当且仅当 P 为假并且 Q 为假。也就是说， P 和 Q 只要有一个为真， P or Q 就为真，这大体上就是 or（或者）的含义。

#### 2.3.3 not

x      |  not x
------ | ----------
True    |  False
False     |  True

逻辑运算符 not 与 and、or 不同，逻辑运算符 not 是对单一布尔表达式进行否定操作，也称为单目运算符。用法如下： not <布尔表达式>。



### 2.4 分支控制结构

#### 2.4.1 单分支结构

所有编程语言都提供了条件语句（if 语句），用来实现有条件地执行语句的功能。Python 语言的 if 语句有多种形式，简单的形式是：
```
if <条件表达式>:  
   <条件语句体>
```
其中<条件表达式>是布尔表达式，<条件语句体>是由一条或多条语句组成的语句序列。<条件语句体>的左端与 if 部分相比必须向右缩进，表明它是 if 部分（不妨理解为条件语句的头部）的下属，就像躯体是头部的下属一样。 if 语句的语义很容易理解：首先计算 if 后面的条件表达式，如果结果为 True，则控制转到条件语句体的第一条语句，一旦条件语句体执行完毕，控制即转到 if 语句的下一条语句； 如果结果为 False，则跳过条件语句体，控制直接转到 if 语句的下一条语句。

#### 2.4.2 多路分支结构

```
if <条件 1>: 
    <情形 1 语句体> 
elif <条件 2>:
    <情形 2 语句体>
elif <条件 n>: 
    <情形 n 语句体>
else: 
    <其他情形语句体> 
```

 if-elif-else 语句的语义是：顺序计算每一个条件表达式，找到第一个为 True 的条件，然后执行其下方缩进的语句体，执行完毕再将控制转到整个 if-elif-else 语句的下一条语句；如果所有条件表达式的计算结果都是 False，则执行在 else 下方缩进的语句体。可见，这种形式的条件语句实现了 n+1 个分支。另外，else 子句是可选的，但要注意的是，如果省略 else 子句，则整个语句就可能没有符合条件的分支，从而不执行任何语句体。

## 3. 挑战答案

要求交替绘制出五颜六色的鲜花螺旋程序


![](/assets/img/5-1.png)
输入为6时的结果如图所示

本次挑战需要结合第四章和第五章的内容共同完成，为了交替绘制螺旋与花朵，我们在外层for循环的内部使用if语句测试绘制时是第奇数次还是第偶数次，如果是偶数次我们就使用```t.circle```绘制花朵，否则我们就使用```t.forward```绘制小螺旋。整个程序的外部框架和第4章的第一个挑战一模一样，我们所需要做的只是添加一个判断循环控制变量m是奇数还是偶数的条件控制语句。

```
import turtle
t = turtle.Pen()
t.penup()
t.speed(0)
turtle.bgcolor('black')

sides = int(turtle.numinput("Number of sides", "How many sides in your spiral of rosettes?", 4, 2, 6))
colors = ['red', 'yellow', 'blue', 'orange', 'green', 'purple']
for m in range(1, 60):
    t.forward(m*4)
    t.width(m//25+1)
    position = t.position()
    heading = t.heading()
    #注意此处，通过取余运算符来判断m是不是偶数，如果是则绘制花儿，否则绘制小螺旋
    if (m % 2 == 0):
        for n in range(sides):
            t.pendown()
            t.pencolor(colors[n%sides%len(colors)])
            t.circle(m/4)
            t.right(360/sides - 2)
            t.penup()
    else:
        for n in range(3,m):
            t.pendown()
            t.pencolor(colors[n%sides%len(colors)])
            t.forward(n)
            t.right(360/sides - 2)
            t.penup()
    t.setx(position[0])
    t.sety(position[1])
    t.setheading(heading)
    t.left(360/sides + 2)
```

## 4. 常见问题与易错点

### 4.1 字符串的比较

数值的大小比较是众所周知的，而字符串的大小比较则不是那么显然。Python 中，字符串是按所谓字典序进行比较的，即基于字母顺序的比较，而字母顺序又是根据 ASCII 编码顺序确定的。这样，所有大写字母都排在任何小写字母之前，而同为大写字母或同为小写字母的两个字母之间按字母表顺序排列。至于标点符号、阿拉伯数字等各种字符的顺序也必 须按 ASCII 编码确定大小。

```
#首先比较第一个字符，'a'比'd'小，所以"abc"小于"def"
>>> "abc" < "def"
True
#首先比较第一个字符，两者相等，后者没有第二个字符，因此"abc"大于"a"
>>> "abc" <= "a"
False
#字符串相等的条件是两个字符串完全一样，大小写有区别
>>> "ABC" == "abc"
False
>>> 
```

### 4.2 逻辑运算优先级

当复杂布尔表达式中存在多个逻辑运算符的时候，哪个先计算、哪个后计算就成了问题。同算术运算符一样，逻辑运算符也定义了优先级，复杂表达式的求值依赖于运算符的优先级规则。例如，考虑下列表达式该如何计算： ```a or not b and c``` 

在 Python 语言中，为逻辑运算符定义的优先级次序是：not > and > or。因此上面的表达式等价于下面这个加括号的形式： ```(a or ((not b) and c))``` 其实，与其背诵优先级规则，不如多用括号来明显地指定计算次序。这对程序员来说不但可以减轻记忆负担，更重要的是增强了代码的可读性。

### 4.3 位运算的 与 或 非

& \| ～分别是位运算中的与 或 非运算符，他们属于算术运算符，其操作是对操作数按位操作。其中0b1010表示二进制数字0b1010，对应我们十进制的10，0b开头代表二进制格式的整型数。

```
>>> 0b1010 & 0b1100
8   #1000
>>> 0b1010 | 0b1100
14  #1110
>>> ~0b1010
-11 #10000000 00000000 00000000 00001011
```

## 5. 课外拓展

5.1 返回用户输入数据的绝对值

```
number = int(input("请输入一个数字:"))
#请更改下一行的比较运算符 输出正确的结果
if (number <= 0):
    return number
else:
    return -number
```


5.2 判断某个年份是闰年还是平年(闰年是指能被4整除但不能被100整除的 或者能被400整除的年份)

```
year = int(input("请输入要判断的年份:"))
#请把下一行的逻辑运算符更改为正确的运算符
if ((year%4==0 or year%100==0) or year%400==0):
    print("闰年")
else:
    print("平年")
```