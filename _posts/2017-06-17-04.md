---
layout:     post
title:      "Fourth Day"
author:     "dushuai"
tags:
    - experience
---

> 循环

<!--more-->

---

## 1. 签到&暖场

开场7点时，跟大家打招呼以及提醒大家开始签到。根据签到情况，若3~4分钟内还有学生没有签到，便告知大家不再等待，仍未签到的同学错过教学的同学可以仔细察看群里的教学记录，有疑问可以课后或者答疑时询问。

同时可以在这段时间内询问一下同学对该次教学的期望，建议和意见。同时可以讲讲各种控制结构--顺序控制/循环控制/分支控制/无条件跳转goto。

## 2. 本章知识点总结

> 概述：能够从头创建for循环，以一定的次数重复一组指令；使用range函数来生成数值列表从而控制这些循环；创建空列表并使用append函数添加元素到这些列表中；能够创建自己的while语句，while循环会在条件为真时一直循环；解释每种类型的循环如何工作以及如何在Python中编写它，能够设计和修改使用了嵌套循环的程序。

### 2.1 range函数

Python 语言提供了一个内建函数 ```range()```，用于产生整数列表，这里给出其完整的用法介绍。 ```range()```的一般形式是： ```range(<起点>, <终点>, <步长>)``` 返回结果是从起点到终点的有序整数列表，各整数之间以步长为差。要特别注意一点，终点的含义是说列表中的整数不得超过终点，但它本身是不包含在列表当中的，对此初学者很容易犯错。另外，起点或步长是可以省略的，它们的缺省值分别是 0 和 1。因此，range 函数 的使用方式有以下三种：

1. ```range(n)```：产生整数列表[0,1,2,...,n-1] 
2. ```range(i,j)```：产生整数列表[i,i+1,i+2, ..., j-1]
3. ```range(i,j,s)```：产生整数列表[i,i+s,i+2s,...] 其中第三种形式的返回结果取决于步长 s，不一定以 j-1 作为后一个成员。     

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
>>> range(5,10)
[5, 6, 7, 8, 9] 
>>> range(1,10,2) 
[1, 3, 5, 7, 9] 
>>> range(10,0,-3) 
[10, 7, 4, 1] 
>>> range(1,1) 
[] 
```

从例中可见，当步长为正数时产生递增的列表，当步长为负数时产生递减的列表。后一个例子表明，如果没有满足条件的整数（从 1 开始并且小于 1 的整数是不存在的），则产生空列表。

### 2.2 循环

循环是程序中的一组语句，只写一次但可以连续执行多次。在编程语言中，构成循环的 这组语句的连续执行的次数一般有三种方式指定：第一，直接指定循环次数；第二，遍历一个数据集合，从而间接指定循环次数（集合有多少成员就循环多少次）；第三，指定一个条件，当条件满足时循环或者循环执行到条件满足为止。

#### 2.2.1 For循环

For循环是已知重复执行次数的循环。for 语句的常用语法形式如下：
```
for <循环控制变量> in <序列>:     
   <循环体>
```
其语义是：用序列中的成员逐个赋值给循环控制变量，对每一次赋值都执行一遍循环体。当序列被遍历，即每一个值都用过了，则循环结束，控制转到下一条语句。for循环的循环次数显然是由序列中有多少成员（即序列长度）决定的，而循环控制变量的作用是存储每一次循环所涉及的序列成员的信息。不难理解，循环控制变量的作用一般仅仅限于这个循环语句，出了这个循环语句循环控制变量就失去了它的作用。因此，编程序时好用一个新变量来做循环控制变量，而不是用前面已经使用过的变量名，以便突显循环控制变量专用于循环控制的角色，不引起理解上的混乱。

本章介绍利用for语句的一种最基本的循环模式，计数器循环。我们可以用下面的 for 语句来解决将“天”字显示 10 遍的问题：

```
>>> for i in range(10):      print("天", end=" ") 
天 天 天 天 天 天 天 天 天 天 
```

这条 for 语句的执行流程是这样的：计算range(10)得到列表[0,1,2,3,4,5,6,7,8,9]，然后令变量 i 从左往右取遍列表[0, 1, ... , 9]中的每一个值，并对所取的每个值都执行一次 print 语句。 

由于列表有 10 个成员，故 print 就被执行了 10 次。注意 print 语句相对上面一行要缩进，表示它是 for 循环要重复执行的语句。 在上面这个例子中，循环体与循环控制变量的值没有关系，即不管循环控制变量从序列中取的值是什么，循环体总是固定地执行 print "天"。从效果上看，循环控制变量和序列仅仅起着计数器的作用，用于控制循环次数，这种循环模式称为计数器循环。当然，循环体引用循环控制变量的值也是很常见的。这种情况下，循环控制变量不仅控制循环次数，而且直接影响循环体的行为。

#### 2.2.2 while循环

for 循环要求预先确定循环的次数，但有很多问题难以预先确定循环次数，只知道在什么 条件下需要循环，这时可以使用 while 语句。Python 语言中 while 语句的常用格式是：

```
while <布尔表达式>:     
    <循环体>
```

其语义是：当布尔表达式计算为 True 时，执行一遍循环体，执行完毕控制转回 while 语句的 开始处重新测试布尔表达式；当布尔表达式计算为 False 时，控制转向下一条语句。显然，while 语句的循环次数取决于布尔表达式何时变成 False，而不是预先确定循环次数。

#### 2.2.3 嵌套循环

为了实现复杂的算法，控制结构可以相互嵌套，即一个控制结构处于另一个控制结构的内部，现在我们讨论循环的嵌套。

设计嵌套循环时，一般先设计外循环，这时并不考虑内循环要做的事。当把外循环的结 构搭建好之后，再去设计内循环的任务，这时又不需要考虑外循环。后将内外两个循环的代码融合在一起，就得到了完整的嵌套循环代码。和两重嵌套循环类似，嵌套循环还可以由三重循环构成，用于处理三维数据结构。依此类推，n 重嵌套循环可用于处理 n 维的数据结构。

## 3. 挑战答案

### 3.1 Spiral Flowers

把病毒式螺旋改为玫瑰花螺旋，也就是把内部循环里的小螺旋改为第4章第3节的玫瑰花图案。

首先，顶部input语句里的问题需要改成玫瑰花螺旋有多少条边。其次，像之前一样，我们需要把直线改为圆圈从而绘制出玫瑰花，在第二个for循环的内部，把```t.forward```改为```t.circle```。

![](/assets/img/4-1.png)
输入为4的情况

```
import turtle
t = turtle.Pen()
t.penup()
t.speed(0)
turtle.bgcolor('black')

sides = int(turtle.numinput("Number of sides", "How many sides in your spiral of rosettes?", 4, 2, 6))
colors = ['red', 'yellow', 'blue', 'orange', 'green', 'purple']
for m in range(100):
    t.forward(m*4)
    position = t.position()
    heading = t.heading()
    for n in range(sides):
        t.pendown()
        t.pencolor(colors[n%sides])
        #t.forward(m*3/5)
        #注意此处，通过绘制5个圆圈从而得到一个玫瑰花
        t.circle(m/5)
        t.right(360/sides-2)
        t.width(m/20)
        t.penup()
    t.setx(position[0])
    t.sety(position[1])
    t.setheading(heading)
    t.left(360/sides + 2)
```

### 3.2 Viral Family Spiral

需要结合之前的familyName以及病毒式螺旋的程序。首先使用while循环获取family列表的名单，然后像病毒式螺旋一样在外部添加一个for循环。**不作深入介绍**

## 4. 常见问题及易错点

### 4.1 死循环

有的同学会遇到这种情况：程序运行了半天总是不出结果，电脑的CPU风扇转得呼呼响。 原因多半是程序产生了死循环。

稍微深入思考一下while循环就会发现一个问题：万一布尔表达式永远不会变成 False 怎么办？如果进入循环语句时布尔表达式计算为 True，而循环体又不会影响布尔表达式的值，那么执行完循环体后控制回到循环入口处时，布尔表达式仍然为 True。这种情况下 while 循环永远不会停下来，称为无穷循环。程序中如果有一个无穷循环就意味着程序无法终止，我们常说程序进入了“死循环”，这是程序设计中经常出现的错误。要想避免无穷循环，必须使循环体对 布尔表达式的值产生影响，例如改变布尔表达式中所用到的变量的值。

### 4.2 break 和 continue

 break和continue都是用来控制循环结构的，主要是停止循环。

1.break

有时候我们想在某种条件出现的时候终止循环而不是等到循环条件为False才终止。
这是我们可以使用break来完成。break用于完全结束一个循环，跳出循环体执行循环后面的语句。

2.continue

continue和break有点类似，区别在于continue只是终止本次循环，接着还执行后面的循环，break则完全终止循环。
可以理解为continue是跳过当次循环中剩下的语句，执行下一次循环。

## 5.课外拓展

打印乘法口诀表

![](/assets/img/4-2.png)

首先要正确使用range函数生成从1到9的列表，内层循环生成从1到i的列表，然后需要使用print语句将每一句乘法口诀打印出来。

```
#请修改下一行的参数，使程序能够打印出九九乘法表
for i in range(1, 6):
  print()
  for j in range(1, i+1):
    print(i, "x" , j, "=" , i*j, end="  ")
```