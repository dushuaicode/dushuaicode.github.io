---
layout:     post
title:      "Ninth Day"
author:     "dushuai"
tags:
    - experience
---

> 键盘事件处理

<!--more-->

---

## 1.目标

1. 了解什么是事件以及如何让程序与键盘交互
2. 实现自己的键盘事件处理函数

## 2.事件

使用事件，可以在特定的时点，触发执行预先设定的一段代码，事件既是代码分解的一种方式，也是设计业务流程的一种模式。现代软件中，事件无处不在，比如，你发了个微信朋友圈，触发了一个事件，导致你的好友，看到了你新发出来的内容。对于事件而言，有这么几个要素：

1. 这是一个什么事件？一个软件系统里，有诸多事件，发布朋友圈是事件，删除朋友圈也是一种事件。
2. 谁触发了事件？你发的朋友圈，就是你触发的事件。
3. 谁负责监听这个事件？或者谁能知道这个事件发生了？服务器上处理广告推送的模块，肯定不会收到你发出朋友圈的事件。
4. 事件怎么处理？对于发布新朋友圈的事件，就是在你的好友的朋友圈里显示这个消息。
5. 事件相关数据是什么？对于发布新朋友圈的事件，包含的数据至少要有朋友圈的内容，时间等。

就是说我们再编程的时候并不确切的知道什么时候会发生这样的事，但是一旦发生事件我们需要怎样处理才是我们需要关注的焦点。这一点就需要我们定义好事件处理函数 ，这一节我们通过学习处理键盘按键事件来理解事件处理的思想方法。

键盘按键处理函数处理的对象就是按键，由运行时用户的按键行为触发，我们的浏览器负责监听事件，事件处理函数由我们自己定义，事件相关数据就是被按压的键是哪一个键。

## 3.键盘事件处理函数

在codemonkey中，键盘按键事件处理函数的定义是和普通函数一模一样的，但是他规定了函数名称必须是onKey，函数参数必须是key，代表背按压的键。所以在166关中我们看到这样的一个函数，在按下任何键时猴子都会前进一步：

```
onKey = (key) ->
    step 1
```

这样的键盘处理事件其实是在JavaScript中大量用到的，他提供了让我们与网页进行交互的一种方式。就像我们的codemonkey一样，在没有键盘事件处理以前，我们只能提前定义好猴子的行动方式，而在添加了键盘事件处理之后，我们真正可以在点击RUN后操作猴子，完成游戏的交互过程。其实你会发现你右边的代码加上左边的图像合在一起已经组成了一个游戏，在你点击RUN之后，你就可以以一个玩家的身份去玩这个游戏了。